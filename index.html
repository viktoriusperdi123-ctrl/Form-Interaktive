<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Form Interaktif Multi-Step</title>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #e3f2fd, #bbdefb);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .form-container {
      background-color: #fff;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      width: 420px;
      transition: 0.3s;
    }

    h2 {
      text-align: center;
      margin-bottom: 20px;
      color: #333;
    }

    /* Progress bar */
    .progress-container {
      width: 100%;
      background-color: #eee;
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 15px;
      height: 12px;
    }

    .progress-bar {
      height: 12px;
      background-color: #007bff;
      width: 0%;
      transition: width 0.4s ease;
    }

    .progress-text {
      text-align: center;
      margin-bottom: 10px;
      font-size: 14px;
      color: #555;
    }

    .step {
      display: none;
      animation: fadeIn 0.4s ease-in-out;
    }

    .step.active {
      display: block;
    }

    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(10px);}
      to {opacity: 1; transform: translateY(0);}
    }

    input, select, button {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 15px;
    }

    label {
      display: block;
      margin-top: 10px;
      color: #333;
    }

    .radio-group label,
    .checkbox-group label {
      display: block;
      margin: 5px 0;
      cursor: pointer;
    }

    button {
      background-color: #007bff;
      color: white;
      border: none;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background-color: #0056b3;
    }

    .message {
      margin-top: 15px;
      padding: 10px;
      background-color: #d4edda;
      color: #155724;
      border-radius: 6px;
      display: none;
    }
  </style>
</head>
<body>
  <div class="form-container">
    <h2>Form Interaktif Multi-Step</h2>

    <!-- Progress -->
    <div class="progress-text" id="progressText">Langkah 1 dari 3</div>
    <div class="progress-container">
      <div class="progress-bar" id="progressBar"></div>
    </div>

    <form id="multiStepForm">
      <!-- Step 1 -->
      <div class="step active" id="step1">
        <input type="text" id="name" placeholder="Nama Lengkap" required>
        <select id="role" required>
          <option value="">Pilih Peran</option>
          <option value="siswa">Siswa</option>
          <option value="guru">Guru</option>
        </select>
        <button type="button" id="next1">Lanjut</button>
      </div>

      <!-- Step 2 -->
      <div class="step" id="step2">
        <div id="dynamicQuestion"></div>
        <button type="button" id="prev2">Kembali</button>
        <button type="button" id="next2">Lanjut</button>
      </div>

      <!-- Step 3 (Minat Utama & Tambahan) -->
      <div class="step" id="step3">
        <label><strong>Pilih satu minat utama:</strong></label>
        <div class="radio-group">
          <label><input type="radio" name="minatUtama" value="Teknologi"> Teknologi</label>
          <label><input type="radio" name="minatUtama" value="Olahraga"> Olahraga</label>
          <label><input type="radio" name="minatUtama" value="Musik"> Musik</label>
          <label><input type="radio" name="minatUtama" value="Seni"> Seni</label>
        </div>

        <label><strong>Pilih minat tambahan:</strong></label>
        <div class="checkbox-group">
          <label><input type="checkbox" name="minatTambahan" value="Membaca"> Membaca</label>
          <label><input type="checkbox" name="minatTambahan" value="Menulis"> Menulis</label>
          <label><input type="checkbox" name="minatTambahan" value="Desain"> Desain</label>
          <label><input type="checkbox" name="minatTambahan" value="Coding"> Coding</label>
        </div>

        <button type="button" id="prev3">Kembali</button>
        <button type="submit">Kirim</button>
      </div>
    </form>
    <div class="message" id="message"></div>
  </div>

  <script>
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const step3 = document.getElementById('step3');
    const next1 = document.getElementById('next1');
    const next2 = document.getElementById('next2');
    const prev2 = document.getElementById('prev2');
    const prev3 = document.getElementById('prev3');
    const form = document.getElementById('multiStepForm');
    const dynamicQuestion = document.getElementById('dynamicQuestion');
    const message = document.getElementById('message');
    const progressBar = document.getElementById('progressBar');
    const progressText = document.getElementById('progressText');

    function updateProgress(step) {
      const total = 3;
      const percent = (step / total) * 100;
      progressBar.style.width = percent + '%';
      progressText.textContent = `Langkah ${step} dari ${total}`;
    }

    next1.addEventListener('click', () => {
      const name = document.getElementById('name').value;
      const role = document.getElementById('role').value;
      if (!name || !role) {
        alert("Harap isi semua kolom.");
        return;
      }

      if (role === "siswa") {
        dynamicQuestion.innerHTML = `
          <label>Nama Sekolah</label>
          <input type="text" id="school" placeholder="Nama Sekolah" required>
        `;
      } else if (role === "guru") {
        dynamicQuestion.innerHTML = `
          <label>Mata Pelajaran</label>
          <input type="text" id="subject" placeholder="Mata Pelajaran" required>
        `;
      }

      step1.classList.remove('active');
      step2.classList.add('active');
      updateProgress(2);
    });

    prev2.addEventListener('click', () => {
      step2.classList.remove('active');
      step1.classList.add('active');
      updateProgress(1);
    });

    next2.addEventListener('click', () => {
      step2.classList.remove('active');
      step3.classList.add('active');
      updateProgress(3);
    });

    prev3.addEventListener('click', () => {
      step3.classList.remove('active');
      step2.classList.add('active');
      updateProgress(2);
    });

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const name = document.getElementById('name').value;
      const role = document.getElementById('role').value;
      let extraInfo = '';
      if (role === "siswa") {
        extraInfo = document.getElementById('school').value;
      } else {
        extraInfo = document.getElementById('subject').value;
      }

      const minatUtama = document.querySelector('input[name="minatUtama"]:checked');
      const minatTambahan = Array.from(document.querySelectorAll('input[name="minatTambahan"]:checked'))
        .map(cb => cb.value);

      if (!minatUtama) {
        alert("Pilih satu minat utama!");
        return;
      }

      message.style.display = 'block';
      message.innerHTML = `
        âœ… <strong>Data Berhasil Dikirim!</strong><br><br>
        Nama: <strong>${name}</strong><br>
        Peran: <strong>${role}</strong><br>
        Info tambahan: <strong>${extraInfo}</strong><br>
        Minat utama: <strong>${minatUtama.value}</strong><br>
        Minat tambahan: <strong>${minatTambahan.join(', ') || 'Tidak ada'}</strong>
      `;

      form.reset();
      step3.classList.remove('active');
      step1.classList.add('active');
      updateProgress(1);
    });

    // Set default progress
    updateProgress(1);
  </script>
</body>
</html>
