<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Form Interaktif Real-Time Preview</title>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: "Poppins", sans-serif;
      background: linear-gradient(135deg, #ece9e6, #ffffff);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      padding: 40px;
      color: #333;
    }
    .container {
      display: flex;
      gap: 30px;
      width: 90%;
      max-width: 900px;
    }
    .form-box, .preview-box {
      flex: 1;
      background: #fff;
      border-radius: 14px;
      padding: 25px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
      color: #007bff;
      margin-bottom: 20px;
    }
    .step {
      display: none;
    }
    .step.active {
      display: block;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: 500;
    }
    input[type="text"], select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-top: 6px;
    }
    .radio-group label, .checkbox-group label {
      font-weight: normal;
      display: block;
      margin-top: 5px;
    }
    button {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 8px;
      margin-top: 15px;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background-color: #0056b3;
    }
    .preview-box {
      background-color: #f9f9ff;
    }
    .preview-box h3 {
      text-align: center;
      color: #444;
      margin-bottom: 15px;
    }
    .preview-item {
      margin-bottom: 8px;
      font-size: 15px;
    }
    .highlight {
      color: #007bff;
      font-weight: 600;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- FORM -->
    <div class="form-box">
      <h2>Form Multi-Step</h2>
      <form id="multiStepForm">
        <!-- Step 1 -->
        <div class="step active" id="step1">
          <label>Nama Lengkap:</label>
          <input type="text" id="name" placeholder="Masukkan nama lengkap" required>

          <label>Peran:</label>
          <select id="role" required>
            <option value="">Pilih Peran</option>
            <option value="siswa">Siswa</option>
            <option value="guru">Guru</option>
          </select>

          <button type="button" id="next1">Lanjut</button>
        </div>

        <!-- Step 2 -->
        <div class="step" id="step2">
          <div id="dynamicQuestion"></div>
          <button type="button" id="prev2">Kembali</button>
          <button type="button" id="next2">Lanjut</button>
        </div>

        <!-- Step 3 -->
        <div class="step" id="step3">
          <h4>Pilih Minat Utama</h4>
          <div class="radio-group">
            <label><input type="radio" name="mainInterest" value="Teknologi"> Teknologi</label>
            <label><input type="radio" name="mainInterest" value="Olahraga"> Olahraga</label>
            <label><input type="radio" name="mainInterest" value="Seni"> Seni</label>
            <label><input type="radio" name="mainInterest" value="Musik"> Musik</label>
          </div>
          <button type="button" id="prev3">Kembali</button>
          <button type="button" id="next3">Lanjut</button>
        </div>

        <!-- Step 4 -->
        <div class="step" id="step4">
          <h4>Pilih Minat Tambahan</h4>
          <div class="checkbox-group">
            <label><input type="checkbox" name="extraInterest" value="Fotografi"> Fotografi</label>
            <label><input type="checkbox" name="extraInterest" value="Travel"> Travel</label>
            <label><input type="checkbox" name="extraInterest" value="Memasak"> Memasak</label>
            <label><input type="checkbox" name="extraInterest" value="Gaming"> Gaming</label>
          </div>
          <button type="button" id="prev4">Kembali</button>
          <button type="submit">Kirim</button>
        </div>
      </form>
    </div>

    <!-- PREVIEW -->
    <div class="preview-box" id="previewBox">
      <h3>Preview Data Anda</h3>
      <div class="preview-item"><strong>Nama:</strong> <span id="pName" class="highlight">-</span></div>
      <div class="preview-item"><strong>Peran:</strong> <span id="pRole" class="highlight">-</span></div>
      <div class="preview-item"><strong>Info Tambahan:</strong> <span id="pExtra" class="highlight">-</span></div>
      <div class="preview-item"><strong>Minat Utama:</strong> <span id="pMain" class="highlight">-</span></div>
      <div class="preview-item"><strong>Minat Tambahan:</strong> <span id="pExtras" class="highlight">-</span></div>
    </div>
  </div>

  <script>
    const steps = document.querySelectorAll(".step");
    const next1 = document.getElementById("next1");
    const next2 = document.getElementById("next2");
    const next3 = document.getElementById("next3");
    const prev2 = document.getElementById("prev2");
    const prev3 = document.getElementById("prev3");
    const prev4 = document.getElementById("prev4");

    const nameInput = document.getElementById("name");
    const roleSelect = document.getElementById("role");
    const dynamicQuestion = document.getElementById("dynamicQuestion");

    const pName = document.getElementById("pName");
    const pRole = document.getElementById("pRole");
    const pExtra = document.getElementById("pExtra");
    const pMain = document.getElementById("pMain");
    const pExtras = document.getElementById("pExtras");

    // Fungsi untuk update preview real-time
    function updatePreview() {
      pName.textContent = nameInput.value || "-";
      pRole.textContent = roleSelect.value || "-";

      const role = roleSelect.value;
      if (role === "siswa" && document.getElementById("school")) {
        pExtra.textContent = document.getElementById("school").value || "-";
      } else if (role === "guru" && document.getElementById("subject")) {
        pExtra.textContent = document.getElementById("subject").value || "-";
      } else {
        pExtra.textContent = "-";
      }

      const mainInterest = document.querySelector('input[name="mainInterest"]:checked');
      pMain.textContent = mainInterest ? mainInterest.value : "-";

      const extras = Array.from(document.querySelectorAll('input[name="extraInterest"]:checked')).map(el => el.value);
      pExtras.textContent = extras.length ? extras.join(", ") : "-";
    }

    // Step navigation
    next1.addEventListener("click", () => {
      if (!nameInput.value || !roleSelect.value) {
        alert("Isi nama dan peran terlebih dahulu!");
        return;
      }
      if (roleSelect.value === "siswa") {
        dynamicQuestion.innerHTML = `<label>Nama Sekolah:</label>
                                     <input type="text" id="school" placeholder="Masukkan nama sekolah">`;
      } else {
        dynamicQuestion.innerHTML = `<label>Mata Pelajaran:</label>
                                     <input type="text" id="subject" placeholder="Masukkan mata pelajaran">`;
      }
      steps[0].classList.remove("active");
      steps[1].classList.add("active");
      updatePreview();
    });

    prev2.addEventListener("click", () => {
      steps[1].classList.remove("active");
      steps[0].classList.add("active");
    });

    next2.addEventListener("click", () => {
      steps[1].classList.remove("active");
      steps[2].classList.add("active");
      updatePreview();
    });

    prev3.addEventListener("click", () => {
      steps[2].classList.remove("active");
      steps[1].classList.add("active");
    });

    next3.addEventListener("click", () => {
      steps[2].classList.remove("active");
      steps[3].classList.add("active");
      updatePreview();
    });

    prev4.addEventListener("click", () => {
      steps[3].classList.remove("active");
      steps[2].classList.add("active");
    });

    // Real-time preview listener
    document.addEventListener("input", updatePreview);
    document.addEventListener("change", updatePreview);

    // Handle submit
    document.getElementById("multiStepForm").addEventListener("submit", (e) => {
      e.preventDefault();
      alert("Data berhasil dikirim! ðŸŽ‰");
      e.target.reset();
      updatePreview();
      steps.forEach(s => s.classList.remove("active"));
      steps[0].classList.add("active");
    });
  </script>
</body>
</html>
